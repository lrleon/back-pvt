
INCLUDES = -I../include -I$(ALEPHW) 
WARN= -Wall -Wextra -Wcast-align -Wno-sign-compare -Wno-write-strings\
	-Wno-parentheses

FLAGS = -std=c++14 $(WARN) -O0 -g
#FLAGS = -std=c++14 $(WARN) -Ofast -DNDEBUG

OPTIONS = $(FLAGS)
CXXFLAGS= -std=c++14 $(INCLUDES) $(OPTIONS)

.SUFFIXES: .rb .H .cc

.rb.H: gen-corr
	$(RM) $*.H; 	\	@@\
	./gen-corr -f $*.rb -H | clang-format -style=Mozilla > $@

.rb.cc: ../include/gen-corr
	$(RM) $*.cc; 	\	@@\
	./gen-corr -f $*.rb -X | clang-format -style=Mozilla > $@

CORRS = solution-gas-oil-relation.rb oil-formation-volume-factor.rb oil-compressibility.rb oil-density.rb dead-oil-viscosity.rb saturated-oil-viscosity.rb undersaturated-oil-viscosity.rb bubble-point-pressure.rb oil-interfacial-tension.rb non-hydrocarborns-corrections.rb gas-pseudocritical-pressure.rb gas-viscosity.rb gas-density.rb gas-compressibility.rb gas-pseudocritical-temp.rb gas-isothermal-compressibility.rb gas-volume-factor.rb water-density.rb

HCORRS = $(CORRS:.rb=.H)
CCORRS = $(CORRS:.rb=.cc)

BIBLIO = $(TOP)/bin/biblio

biblios.H: refs.bib
	$(RM) $*.H; 	\	@@\
	$(BIBLIO) -H -f refs.bib | clang-format -style=Mozilla > $@

depend:: $(HCORRS)

all:: $(HCORRS) $(CCORRS) biblios.H

clean::
	$(RM) $(HCORRS) $(CCORRS) biblios.H
